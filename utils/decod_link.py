import base64
from urllib.parse import unquote


def decode_fucking_social(encoded_url):
    try:
        encoded_url = encoded_url.replace("\n", "").replace(" ", "")
        encoded_url = encoded_url.split("/")[-1]

        decoded_url_encoded = unquote(encoded_url)

        decoded_url = base64.urlsafe_b64decode(
            decoded_url_encoded + "=" * (4 - len(decoded_url_encoded) % 4)
        ).decode("utf-8", errors="ignore")
        return decoded_url.split("\n")[0]
    except (ValueError, UnicodeEncodeError):
        return ""


#
# not_working = "https://link.2gis.ru/4.2/280BABEE/aHR0cHM6Ly93YS5tZS83OTIzMTIyMzM5OT90ZXh0PSVEMCU5NyVEMCVCNCVEMSU4MCVEMCVCMCVEMCVCMiVEMSU4MSVEMSU4MiVEMCVCMiVEMSU4MyVEMCVCOSVEMSU4MiVEMCVCNSElMEElMEElRDAlOUYlRDAlQjglRDElODglRDElODMlMjAlRDAlQjglRDAlQjclMjAlRDAlQkYlRDElODAlRDAlQjglRDAlQkIlRDAlQkUlRDAlQjYlRDAlQjUlRDAlQkQlRDAlQjglRDElOEYlMjAyJUQwJTkzJUQwJTk4JUQwJUExLiUwQSUwQQpodHRwczovL3MxLmJzcy4yZ2lzLmNvbS9ic3MvMwpbeyJjb21tb24iOnsiZm9ybWF0VmVyc2lvbiI6MywiYXBwVmVyc2lvbiI6IjIwMjQtMDEtMTEtMTEiLCJwcm9kdWN0IjozNCwiYXBpa2V5IjoicnVyYmJuMzQ0NiIsImFwaWtleVN0YXR1cyI6MSwidXNlciI6IjQ0OTAwMDBiLTllMDgtNGZhNy1hMmE1LWIzNDAzNzVjMTJiNCIsImlwIjoiOTQuMTMxLjExNS41MCIsInNlc3Npb25JZCI6ImZiMDc1OWE4LTA3ZjQtNDliNC1hZjYzLTlhYTExZmFiYzY4OSIsInVzZXJBZ2VudCI6Ik1vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1XzcpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMTguMC4wLjAgWWFCcm93c2VyLzIzLjExLjAuMCBTYWZhcmkvNTM3LjM2IiwiZGV2aWNlVHlwZSI6ImRlc2t0b3AiLCJwZXJzb25hbERhdGFDb2xsZWN0aW9uQWxsb3dlZCI6dHJ1ZSwidGFiSXNBY3RpdmUiOnRydWV9LCJ1dGNPZmZzZXQiOiIrMDQ6MDAiLCJ0YWJJZCI6IjZhZWFiZDRiLTcxNmEtNDNjMS05ZDk0LWZkNDVkZTZkY2M4NSIsInRpbWVzdGFtcCI6MTcwNDk4MjgxMzU5OCwidHlwZSI6MjExLCJldmVudFR5cGUiOiJhY3Rpb24iLCJldmVudElkIjoiZmI0MjM3NDItMzM2ZC00YTc0LTk0ZGQtN2RjN2MwYTM2MDhhIiwiYWN0aW9uVHlwZSI6ImV4dGVybmFsTGluayIsImV2ZW50T3JkaW5hbCI6MCwidWlFbGVtZW50Ijp7Im5hbWUiOiJjb250YWN0Iiwib3duZXJOYW1lIjoiY2FyZENvbnRhY3RzIiwicG9zaXRpb24iOjMsImZyYW1lVXVpZCI6ImJkMDQxY2E0LTU0NTctNDEzYS05MTZjLTg4ZGU4OWE1MDRlMSJ9LCJwYXlsb2FkIjp7ImNvbnRhY3QiOnsidmFsdWUiOiJodHRwczovL3dhLm1lLzc5MjMxMjIzMzk5P3RleHQ9JUQwJTk3JUQwJUI0JUQxJTgwJUQwJUIwJUQwJUIyJUQxJTgxJUQxJTgyJUQwJUIyJUQxJTgzJUQwJUI5JUQxJTgyJUQwJUI1ISUwQSUwQSVEMCU5RiVEMCVCOCVEMSU4OCVEMSU4MyUyMCVEMCVCOCVEMCVCNyUyMCVEMCVCRiVEMSU4MCVEMCVCOCVEMCVCQiVEMCVCRSVEMCVCNiVEMCVCNSVEMCVCRCVEMCVCOCVEMSU4RiUyMDIlRDAlOTMlRDAlOTglRDAlQTEuJTBBJTBBIiwidHlwZSI6IndoYXRzYXBwIiwicG9zaXRpb24iOjN9LCJwbGFjZUl0ZW0iOnsiZW50aXR5Ijp7ImlkIjoiNzAwMDAwMDEwMzA3NTQxNzgiLCJ0eXBlIjoiYnJhbmNoIiwic2VnbWVudEluZm8iOnsiYmFzZUxvY2FsZSI6InJ1X1JVIiwic2VnbWVudElkIjoiMzIifX0sImdlb1Bvc2l0aW9uIjp7ImxvbiI6MzcuNTY1NTI0LCJsYXQiOjU1Ljc0NDY5NH0sImFkc1NlYXJjaCI6dHJ1ZSwibWFpblJ1YnJpYyI6IjQyNSIsImlzRGVsZXRlZCI6ZmFsc2UsIm9yZyI6IjcwMDAwMDAxMDM3MjI1Njg1IiwiY29udGV4dFJ1YnJpYyI6IjY0MyIsInJlc3VsdENsYXNzIjoyfSwiZXh0ZXJuYWxMaW5rIjp7ImZvcmtFdmVudE9yZGluYWwiOjE1OSwicGFyZW50VGFiSWQiOiJjNDAzNjE2Yy1hZjYwLTQ0ZmYtYWVmNi01NTNhYTcyM2NjODYifX0sImFiVGVzdCI6W3sibmFtZSI6Im1vYmlsZVByb21vMiIsInZhbHVlIjoiZnVsbHNjcmVlbkNob2ljZTFfMSJ9LHsibmFtZSI6ImNob29zZUJhbm5lclRleHQiLCJ2YWx1ZSI6Im5ld1RleHRfMiJ9LHsibmFtZSI6ImFwcFByb21vVGV4dCIsInZhbHVlIjoibmV3VGV4dF8xIn0seyJuYW1lIjoiYXBwUHJvbW9CdXR0b24iLCJ2YWx1ZSI6InZhcmlhbnQyXzIifV19XQ%3D%3D"
# decode_fucking_social(not_working)
