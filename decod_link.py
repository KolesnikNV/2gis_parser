import base64
from urllib.parse import unquote


def decode_fucking_social(encoded_url):
    if encoded_url == "":
        return ""
    encoded_url = encoded_url.replace("\n", "").replace(" ", "")
    encoded_url = encoded_url.split("/")[-1]

    decoded_url_encoded = unquote(encoded_url)

    decoded_url = base64.urlsafe_b64decode(
        decoded_url_encoded + "=" * (4 - len(decoded_url_encoded) % 4)
    ).decode("utf-8", errors="ignore")
    print(decoded_url.split("\n")[0])
    return decoded_url.split("\n")[0]


#
# not_working = "https://link.2gis.ru/4.2/6F0DA7D4/aHR0cHM6Ly92ay5jb20vdmt1c25vX2l0b2Noa2EKaHR0cHM6Ly9zMS5ic3MuMmdpcy5jb20vYnNzLzMKW3siY29tbW9uIjp7ImZvcm1hdFZlcnNpb24iOjMsImFwcFZlcnNpb24iOiIyMDI0LTAxLTExLTExIiwicHJvZHVjdCI6MzQsImFwaWtleSI6InJ1cmJibjM0NDYiLCJhcGlrZXlTdGF0dXMiOjEsImRldmljZUxvY2FsZSI6InJ1X1JVIiwidXNlciI6IjgyOTk4MDYwLTAxMzUtNDBjOC05YzZmLTIwZTVjNmNmN2Y1MiIsImlwIjoiOTQuMTMxLjExNS41MCIsInNlc3Npb25JZCI6ImQxMjc3YzY5LTJhYzgtNDRlNC05ZGMyLWZkMGVjZDI3ODY0MyIsInVzZXJBZ2VudCI6Ik1vemlsbGEvNS4wLjAuMCIsImRldmljZVR5cGUiOiJkZXNrdG9wIiwicGVyc29uYWxEYXRhQ29sbGVjdGlvbkFsbG93ZWQiOnRydWUsInRhYklzQWN0aXZlIjp0cnVlfSwidXRjT2Zmc2V0IjoiKzA0OjAwIiwidGFiSWQiOiIyZjYyMWQ4NC05ZWYwLTRiZTYtYWU5YS04MjE3MDhhMTViODUiLCJ0aW1lc3RhbXAiOjE3MDQ5NzY2NDQ0NzgsInR5cGUiOjIxMSwiZXZlbnRUeXBlIjoiYWN0aW9uIiwiZXZlbnRJZCI6ImJjOTAyMjdiLTFlMTYtNGQ2Ni1hNmRmLTc3Y2I2ODNlNDBkNSIsImFjdGlvblR5cGUiOiJleHRlcm5hbExpbmsiLCJldmVudE9yZGluYWwiOjAsInVpRWxlbWVudCI6eyJuYW1lIjoiY29udGFjdCIsIm93bmVyTmFtZSI6ImNhcmRDb250YWN0cyIsInBvc2l0aW9uIjoxLCJmcmFtZVV1aWQiOiIxNjBlZTg1Ny1lY2U0LTQ3ZjQtYWVjZC1jMmZlNzNjZDZjYTAifSwicGF5bG9hZCI6eyJjb250YWN0Ijp7InZhbHVlIjoiaHR0cHM6Ly92ay5jb20vdmt1c25vX2l0b2Noa2EiLCJ0eXBlIjoidmtvbnRha3RlIiwicG9zaXRpb24iOjF9LCJwbGFjZUl0ZW0iOnsiYWRzSWQiOiIxMTgxMTc4MzE4OTM2ODU1Mjk2IiwiZW50aXR5Ijp7ImlkIjoiNzAwMDAwMDEwMjYwMjU1NDQiLCJ0eXBlIjoiYnJhbmNoIiwic2VnbWVudEluZm8iOnsiYmFzZUxvY2FsZSI6InJ1X1JVIiwic2VnbWVudElkIjoiMTgifX0sImdlb1Bvc2l0aW9uIjp7ImxvbiI6NTAuMTc1OTcsImxhdCI6NTMuMjA5Njk3fSwiYWRzU2VhcmNoIjpmYWxzZSwibWFpblJ1YnJpYyI6IjE2NSIsImlzRGVsZXRlZCI6ZmFsc2UsIm9yZyI6IjI1MzM4MTE2NjEzMDg1ODkiLCJyZXN1bHRDbGFzcyI6MX0sImV4dGVybmFsTGluayI6eyJmb3JrRXZlbnRPcmRpbmFsIjoxOCwicGFyZW50VGFiSWQiOiJjNWI4MjRjNS1jY2Q5LTQ0NTAtODJhYi02N2ZiN2E2YjBiZDQifX0sImFiVGVzdCI6W3sibmFtZSI6ImNob29zZUJhbm5lclRleHQiLCJ2YWx1ZSI6Im5ld1RleHRfMSJ9LHsibmFtZSI6ImFwcFByb21vVGV4dCIsInZhbHVlIjoibmV3VGV4dF8yIn0seyJuYW1lIjoiYXBwUHJvbW9CdXR0b24iLCJ2YWx1ZSI6InZhcmlhbnQxXzIifSx7Im5hbWUiOiJnZW5lcmFsaXphdGlvblRlc3QyMzEyIiwidmFsdWUiOiJnZW5lcmFsaXphdGlvblVzdWFsXzIifV19XQ%3D%3D"
# decode_fucking_social(not_working)
